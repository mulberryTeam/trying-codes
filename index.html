<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
  <title>Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙˆØ¸Ù - Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„</title>
  <!-- Ø±Ø§Ø¨Ø· Ø®Ø·ÙˆØ· Google -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700" rel="stylesheet">
  <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Font Awesome -->
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-storage-compat.js"></script>
  <!-- Ø¥Ø¶Ø§ÙØ© Ù…ÙƒØªØ¨Ø© Firestore -->
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
  <style>


:root {
  --secondary-color: #3498db; /* Ø£Ùˆ Ø£ÙŠ Ù„ÙˆÙ† ØªØ±ÙŠØ¯Ù‡ Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© */
}



    /* Ø®Ù„ÙÙŠØ© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ */
    #bgVideo {
      position: fixed;
      right: 0;
      bottom: 0;
      min-width: 100%;
      min-height: 100%;
      z-index: -1;
      object-fit: cover;
    }
    /* Ù‚ÙˆØ§Ø¹Ø¯ Ø¹Ø§Ù…Ø© */
    body {
      font-family: 'Roboto', sans-serif;
      background: transparent;
      margin: 0;
      padding: 20px;
      transition: background 0.3s ease;
    }
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }
    .header-left {
      display: flex;
      align-items: center;
    }
    .header-logo {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      object-fit: cover;
      margin-left: 10px;
    }
    .logout-btn {
      padding: 8px 16px;
      background: #e74c3c;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 10px;
      transition: transform 0.3s ease, background 0.3s ease;
    }
    .logout-btn:hover { 
      background: #c0392b;
      transform: scale(1.05);
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: rgba(255,255,255,0.95);
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      position: relative;
      overflow: hidden;
    }
    /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù„Ø³Ù†Ø© */
    .tab-nav {
      display: flex;
      border-bottom: 2px solid #ddd;
      margin-bottom: 20px;
      overflow-x: auto;
    }
    .tab-nav button {
      flex: 1;
      padding: 12px;
      background: none;
      border: none;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.3s ease, color 0.3s ease;
    }
    .tab-nav button:hover { background: #f0f0f0; }
    .tab-nav button.active {
      border-bottom: 3px solid #3498db;
      font-weight: bold;
    }
    
    /* ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª - ÙÙ„ØªØ± Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª */
    .filter-section {
      margin-bottom: 20px;
      padding: 20px;
      background: #f0f4f8;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      transition: box-shadow 0.3s ease;
    }
    .filter-section:hover {
      box-shadow: 0 6px 14px rgba(0,0,0,0.15);
    }
    .filter-section label {
      margin-right: 10px;
      font-weight: 500;
    }
    .filter-section input {
      margin-right: 10px;
      padding: 6px;
      border: 1px solid #ccc;
      border-radius: 4px;
      transition: border 0.3s ease;
    }
    .filter-section input:focus {
      border-color: #3498db;
      outline: none;
    }
    .filter-section button {
      padding: 8px 16px;
      background: #3498db;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.3s ease;
    }
    .filter-section button:hover { 
      background: #2980b9;
      transform: scale(1.03);
    }
    /* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª */
    .sales-card {
      background: #f7f9fc;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      overflow-x: auto;
      transition: box-shadow 0.3s ease;
    }
    .sales-card:hover {
      box-shadow: 0 6px 14px rgba(0,0,0,0.15);
    }
    .sales-card table {
      width: 100%;
      border-collapse: collapse;
    }
    .sales-card th, .sales-card td {
      padding: 12px;
      border-bottom: 1px solid #ddd;
      text-align: center;
    }
    .sales-card th { 
      background: #3498db; 
      color: #fff;
      font-weight: bold;
    }
    .sales-summary {
      margin-top: 15px;
      font-size: 16px;
      font-weight: bold;
    }
    /* ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª */
    .account-settings {
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      transition: box-shadow 0.3s ease;
    }
    .account-settings:hover {
      box-shadow: 0 6px 14px rgba(0,0,0,0.15);
    }
    .account-settings h3 { margin-top: 0; }
    .account-settings label { display: block; margin-top: 10px; font-weight: 500; }
    .account-settings input[type="text"],
    .account-settings input[type="password"],
    .account-settings input[type="file"] {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
      transition: border 0.3s ease;
    }
    .account-settings input:focus {
      border-color: #3498db;
      outline: none;
    }
    .account-settings button {
      margin-top: 15px;
      padding: 10px 20px;
      background: #3498db;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.3s ease;
    }
    .account-settings button:hover { 
      background: #2980b9;
      transform: scale(1.03);
    }
    /* Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© */
    @media (max-width: 768px) {
      .container { padding: 20px; }
      .header { flex-direction: column; align-items: flex-start; }
      .logout-btn { width: 100%; text-align: center; }
      .tab-nav button { font-size: 14px; }
    }

.workplan-instructions p {
  font-weight: bold;
  font-family: 'Roboto', sans-serif;
  font-size: 16px;
  margin-bottom: 15px;
}


/* Ø¥Ø²Ø§Ù„Ø© Ù†Ù‚Ø§Ø· Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ÙˆØ­Ø°Ù Ø§Ù„Ù…Ø³Ø§ÙØ§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© */
#productList {
  list-style: none;
  padding: 0;
  margin: 0;
}

/* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ÙØ¦Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ© */
#productList li {
  display: inline-block;
  padding: 10px 20px;
  margin-top: 10px;
  border: 2px solid #8e44ad;       /* Ø¥Ø·Ø§Ø± Ø¨Ù†ÙØ³Ø¬ÙŠ */
  border-radius: 8px;
  background-color: #f8e5fa;        /* Ø®Ù„ÙÙŠØ© ÙØ§ØªØ­Ø© Ø¨Ù†ÙØ³Ø¬ÙŠØ© Ø®ÙÙŠÙØ© */
  font-weight: bold;
  font-size: 18px;
  color: #8e44ad;                   /* Ù†Øµ Ø¨Ù†ÙØ³Ø¬ÙŠ */
}


/* 1. Ù†Ø®Ù„ÙŠ Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø«Ø§Ø¨Øª Ø£Ø³ÙÙ„ Ø§Ù„Ø´Ø§Ø´Ø© */
.motivational-container {
  background-color: #f8e5fa;
  border: 2px solid #8e44ad;
  border-radius: 8px;
  padding: 15px;
  margin-top: 0px;        /* Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ†Ù‡ ÙˆØ¨ÙŠÙ† Ø§Ø³Ù… Ø§Ù„ÙØ¦Ø© */
  margin-bottom: 0px;     /* Ù…Ø³Ø§ÙØ© Ù…Ù† Ø£Ø³ÙÙ„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© */
}





/* 3. Ø´ÙƒÙ„ Ø§Ù„Ù†Øµ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø±Ø¨Ø¹ */
.motivational-header {
  display: flex;
  align-items: center;
  font-weight: bold;
  font-size: 20px;
  margin-bottom: 10px;
}

.motivational-header .emoji {
  margin-left: 8px;
}

.motivational-text p {
  font-weight: bold;
  margin: 5px 0;
}





/* 3) Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ø³Ù… Ø§Ù„ÙØ¦Ø© ÙˆØ§Ù„Ù…Ø±Ø¨Ø¹ */
#productList {
  list-style: none;
  padding: 0;
  margin: 0;
  margin-bottom: 100px; /* â¬…ï¸ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„ÙØ¦Ø© ÙˆØ§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„ØªØ­ÙÙŠØ²ÙŠ */
}


/* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ù‚Ø³Ù… Ù†ØµØ§Ø¦Ø­ Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…ÙŠØ© */
.instagram-tips-section {
  padding: 20px;
  background: #fafafa;
  border-radius: 8px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  margin-bottom: 20px;
}
.instagram-tips-section h3 {
  margin-top: 0;
  color: #C13584; /* Ù„ÙˆÙ† ÙŠØ´Ø¨Ù‡ Ø´Ø¹Ø§Ø± Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù… */
}
.instagram-tips-section ul {
  list-style: disc inside;
  padding-left: 0;
}





/* Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø·Ù„Ø¨ÙŠØ§Øª */
.order-cards {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  justify-content: center;
  margin-bottom: 30px;
}
.order-card {
  background: #fff;
  border: 2px solid var(--secondary-color);
  border-radius: 8px;
  padding: 15px;
  width: 280px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  position: relative;
}
.order-card h3 {
  margin: 0 0 10px;
  font-size: 18px;
}
.order-card p {
  margin: 6px 0;
}
.order-card .status {
  font-weight: bold;
  display: flex;
  align-items: center;
  margin-top: 10px;
}
.order-card .status .emoji {
  margin-left: 6px;
}





.loading-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255,255,255,0.9);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.loading-spinner {
  width: 50px;
  height: 50px;
  border: 5px solid #f3f3f3;
  border-top: 5px solid #3498db;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}





.gender-prompt {
  text-align: center;
  padding: 30px;
  background: #fff;
  border-radius: 15px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.1);
  margin: 20px 0;
}

.gender-buttons {
  display: flex;
  gap: 20px;
  justify-content: center;
  margin-top: 25px;
}

.gender-btn {
  padding: 20px 40px;
  border: none;
  border-radius: 12px;
  font-size: 18px;
  cursor: pointer;
  transition: transform 0.3s, box-shadow 0.3s;
  display: flex;
  align-items: center;
  gap: 10px;
}

.gender-btn.male {
  background: #3498db;
  color: white;
}

.gender-btn.female {
  background: #e91e63;
  color: white;
}

.gender-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

.gender-btn i {
  font-size: 24px;
}





.category-card {
  background: #fff;
  border-radius: 15px;
  padding: 20px;
  margin: 20px 0;
  box-shadow: 0 4px 20px rgba(0,0,0,0.1);
}

.category-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 15px;
  border-bottom: 2px solid #eee;
  padding-bottom: 15px;
}

.category-header i {
  font-size: 24px;
  color: #3498db;
}

.category-badge {
  display: inline-block;
  padding: 10px 20px;
  background: #f8f9fa;
  border-radius: 8px;
  font-weight: bold;
  border: 2px solid #3498db;
  color: #3498db;
}

.info-btn {
  margin-top: 15px;
  padding: 10px 20px;
  background: #27ae60;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.3s;
  display: flex;
  align-items: center;
  gap: 8px;
}

.info-btn:hover {
  background: #219a52;
}










/* ØªÙ†Ø³ÙŠÙ‚Ø§Øª ÙØ§Ø®Ø±Ø© Ù„Ù„Ù‚Ø§Ø¯Ø© */
body.leader-theme {
  --secondary-color: #8e44ad;
  background: linear-gradient(45deg, #f8e5fa 0%, #e8d3ff 100%);
  position: relative;
  overflow-x: hidden;
}

body.leader-theme::before {
  content: "";
  position: fixed;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background-image: 
    radial-gradient(circle at 70% 30%, rgba(142, 68, 173, 0.1) 20%, transparent 40%),
    linear-gradient(45deg, transparent 60%, rgba(255, 223, 186, 0.2) 100%);
  animation: leader-glow 20s linear infinite;
  z-index: -1;
}

@keyframes leader-glow {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

body.leader-theme .container {
  border: 3px solid #8e44ad;
  box-shadow: 
    0 0 40px rgba(142, 68, 173, 0.3),
    inset 0 0 20px rgba(142, 68, 173, 0.2);
  background: linear-gradient(145deg, #ffffff 0%, #fdfcff 100%);
  backdrop-filter: blur(10px);
}

.leader-badge {
  position: fixed;
  top: 20px;
  left: 20px;
  background: linear-gradient(45deg, #8e44ad, #9b59b6);
  color: #fff;
  padding: 10px 25px;
  border-radius: 30px;
  font-weight: bold;
  box-shadow: 
    0 4px 20px rgba(142, 68, 173, 0.4),
    0 0 15px rgba(255, 255, 255, 0.3) inset;
  display: flex;
  align-items: center;
  gap: 10px;
  border: 2px solid #fff;
  animation: badge-float 3s ease-in-out infinite;
}

@keyframes badge-float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

.leader-badge i {
  filter: drop-shadow(0 2px 2px rgba(0,0,0,0.2));
}

body.leader-theme .header {
  border-bottom: 2px solid #8e44ad;
  background: rgba(255,255,255,0.9);
  backdrop-filter: blur(5px);
}

/* â¬‡ï¸ Ø£Ø¶Ù Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯ â¬‡ï¸ */
.header {
  background: transparent !important;
  backdrop-filter: none !important;
}

body.leader-theme .logout-btn {
  background: linear-gradient(45deg, #9b59b6, #8e44ad);
  position: relative;
  overflow: hidden;
}

body.leader-theme .logout-btn::after {
  content: "";
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(45deg, 
    transparent 20%, 
    rgba(255,255,255,0.3) 50%, 
    transparent 80%);
  animation: btn-glow 3s linear infinite;
}

@keyframes btn-glow {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

body.leader-theme .tab.active {
  color: #8e44ad;
  text-shadow: 0 0 10px rgba(142, 68, 173, 0.3);
  border-bottom: 3px solid #8e44ad;
}

body.leader-theme .sales-card th {
  background: linear-gradient(45deg, #8e44ad, #9b59b6);
  letter-spacing: 1px;
}

body.leader-theme .filter-section button {
  background: #9b59b6;
  position: relative;
  overflow: hidden;
  transition: all 0.3s;
}

body.leader-theme .filter-section button:hover {
  background: #8e44ad;
  transform: scale(1.05);
  box-shadow: 0 4px 15px rgba(142, 68, 173, 0.4);
}

/* ØªÙˆÙ‡Ø¬ Ø®Ø§Øµ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ù‡Ù…Ø© */
.leader-glow {
  box-shadow: 0 0 20px rgba(142, 68, 173, 0.4);
  animation: glow-pulse 2s ease-in-out infinite;
}

@keyframes glow-pulse {
  0%, 100% { box-shadow: 0 0 20px rgba(142, 68, 173, 0.4); }
  50% { box-shadow: 0 0 30px rgba(142, 68, 173, 0.6); }
}







body.leader-theme .header-left {
  background: transparent;
}

body.leader-theme .header-logo {
  box-shadow: 0 0 15px rgba(142, 68, 173, 0.3);
}









/* Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù…Ù† Ù‡Ù†Ø§ */
#leaderBonus {
  background: rgba(255,255,255,0.9);
  padding: 20px;
  border-radius: 15px;
  margin: 25px 0;
  border: 2px solid #8e44ad;
  box-shadow: 0 4px 20px rgba(142, 68, 173, 0.2);
  backdrop-filter: blur(5px);
}

#leaderBonus h3 {
  color: #8e44ad;
  margin-top: 0;
  border-bottom: 2px solid #f0f0f0;
  padding-bottom: 10px;
}

#leaderBonus p {
  font-size: 18px;
  margin: 15px 0;
  font-weight: 500;
}
/* Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¥Ø¶Ø§ÙØ© */




/* Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù‡Ù†Ø§ */
#totalEarnings {
  font-size: 20px;
  color: #27ae60;
  font-weight: bold;
  border-top: 2px solid #eee;
  padding-top: 15px;
  margin-top: 15px;
}

#personalProfit {
  color: #2980b9;
}
/* Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¥Ø¶Ø§ÙØ© */







#leaderFilterDisplay {
  background: #f8f9fa;
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #8e44ad;
  margin: 10px 0;
}












/* Ø¨Ø·Ø§Ù‚Ø§Øª Ù…ÙƒØ§ÙØ¢Øª Ø§Ù„Ù…ÙˆØ¸Ù */
.reward-section {
  width: 100%;
}
.reward-card {
  position: relative;
  width: 260px;
  padding: 16px;
  border: 2px solid #4caf50;
  border-radius: 12px;
  box-shadow: 0 0 12px rgba(76, 175, 80, 0.5);
  background: #fff;
  overflow: hidden;
  font-family: 'Roboto', sans-serif;
}
.reward-card__icon {
  position: absolute;
  top: -10px; right: -10px;
  font-size: 2.2rem;
  color: #4caf50;
  font-weight: bold;
}
.reward-card__content {
  text-align: center;
  padding-top: 10px;
}
.reward-card__type {
  font-size: 1rem;
  margin-bottom: 6px;
  color: #333;
}
.reward-card__amount {
  font-size: 1.8rem;
  font-weight: bold;
  margin-bottom: 4px;
  color: #4caf50;
}
.reward-card__date {
  font-size: 0.8rem;
  color: #777;
}
.reward-card__nav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: transparent;
  border: none;
  font-size: 1.4rem;
  color: #4caf50;
  cursor: pointer;
  padding: 4px 8px;
}
.reward-card__nav.prev { left: 6px; }
.reward-card__nav.next { right: 6px; }
.reward-card__nav:hover {
  transform: translateY(-50%) scale(1.2);
  transition: transform 0.2s;
}
/* Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„ */
@keyframes slideLeft { from { transform: translateX(100%); opacity:0; } to { transform: translateX(0); opacity:1; } }
@keyframes slideRight{ from { transform: translateX(-100%); opacity:0; } to { transform: translateX(0); opacity:1; } }
.slide-left  { animation: slideLeft 0.2s ease; }
.slide-right { animation: slideRight 0.2s ease; }







  </style>
</head>
<body>
  <!-- Ø®Ù„ÙÙŠØ© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ -->
  <video autoplay muted loop id="bgVideo">
    <source src="https://cdn.dribbble.com/userupload/28774288/file/large-0f5d92145d706df70e061ebbf838fa27.mp4" type="video/mp4">
    Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ.
  </video>
  
  <div class="header">
    <div class="header-left">
      <img class="header-logo" id="employeePhotoDisplay"
     src="https://cdn-icons-png.flaticon.com/512/8053/8053444.png"
     alt="ØµÙˆØ±Ø© Ø§Ù„Ù…ÙˆØ¸Ù">

      <h1 id="employeeNameDisplay">Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙˆØ¸Ù</h1>
    </div>
    <button class="logout-btn" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
  </div>
  <div class="container">
    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù„Ø³Ù†Ø© Ù…Ø¹ Ø²Ø± Ø§Ù„ØªØ±Ø¬Ù…Ø© -->
    <div class="tab-nav">
      <button id="tabAnalyticsBtn" class="active" onclick="showEmployeeTab('analytics', event)">ØªØ­Ù„ÙŠÙ„Ø§Øª</button>
   <button id="tabWorkPlanBtn" onclick="showEmployeeTab('workplan', event)">Ø®Ø·Ø© Ø§Ù„Ø¹Ù…Ù„</button>
<button id="tabInstagramTipsBtn" onclick="showEmployeeTab('instagramTips', event)">Ù†ØµØ§Ø¦Ø­ Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…ÙŠØ©</button>
<button id="tabOrdersBtn" onclick="showEmployeeTab('orders', event)">Ø§Ù„Ø·Ù„Ø¨ÙŠØ§Øª</button>



      
    </div>
    
    <!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª -->
    <div id="analytics" class="employee-tab" style="display: block;">
      <div class="filter-section">
        <span id="filterLabel">ØªØµÙÙŠØ© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø­Ø³Ø¨:</span>
        <label id="radioDayLabel">
          <input type="radio" name="filterType" value="day" checked onclick="toggleFilterInputs('day')"> ÙŠÙˆÙ…
        </label>
        <label id="radioMonthLabel">
          <input type="radio" name="filterType" value="month" onclick="toggleFilterInputs('month')"> Ø´Ù‡Ø±
        </label>
        <label id="radioPeriodLabel">
          <input type="radio" name="filterType" value="period" onclick="toggleFilterInputs('period')"> ÙØªØ±Ø© Ù…Ø®ØµØµØ©
        </label>
        <div id="filterDay" style="margin-top:10px;">
          <input type="date" id="filterDayInput">
        </div>
        <div id="filterMonth" style="margin-top:10px; display:none;">
          <input type="month" id="filterMonthInput">
        </div>
        <div id="filterPeriod" style="margin-top:10px; display:none;">
          <label>Ù…Ù†:</label>
          <input type="date" id="filterStartDate">
          <label>Ø¥Ù„Ù‰:</label>
          <input type="date" id="filterEndDate">
        </div>
        <button onclick="loadSalesData(); loadRewards();">ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØµÙÙŠØ©</button>

      </div>
      <h2 id="salesHeader">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØ§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ</h2>



<button id="calculatePointsBtn" onclick="calculatePoints()" style="margin-left:10px; padding:5px 10px; background:#2980b9; color:#fff; border:none; border-radius:5px;">
  Ø§Ø­ØªØ³Ø§Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·
</button>



















<h3 id="employeeTargetDisplay" style="color:#27ae60; margin-bottom: 15px;"></h3><!-- Ø¨Ø·Ø§Ù‚Ø© Ù…ÙƒØ§ÙØ¢Øª Ø§Ù„Ù…ÙˆØ¸Ù -->
<div id="rewardSection" class="reward-section" style="display: flex; align-items: flex-start; gap: 20px; margin-bottom: 20px;">
  <!-- Ù†Øµ ØªÙˆØ¶ÙŠØ­ÙŠ ØµØºÙŠØ± -->
  <p class="reward-desc" style="font-size: 0.85rem; color: #555; margin-top: 4px;">
    Ù‡Ø°Ù‡ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© ØªØ¹Ø±Ø¶ Ù…Ù„Ø®Ù‘Øµ Ù…ÙƒØ§ÙØ¢ØªÙƒ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±.
  </p>
  <!-- Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ù†ÙØ³Ù‡Ø§ -->
  <div id="rewardCard" class="reward-card">
    <div class="reward-card__icon">+</div>
    <div class="reward-card__content">
      <div class="reward-card__type">Ù†ÙˆØ¹ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©</div>
      <div class="reward-card__amount">â‚ª0</div>
      <div class="reward-card__date">â€”</div>
    </div>
    <button class="reward-card__nav prev">&lt;</button>
    <button class="reward-card__nav next">&gt;</button>
  </div>
</div>


      <div id="salesData" class="sales-card">
        <!-- ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ù‡Ù†Ø§ -->
      </div>
      <div class="sales-summary" id="salesSummary"></div>


<!-- Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù…Ù† Ù‡Ù†Ø§ -->
<div id="leaderBonus" style="display: none;">
  <h3>Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© (10%) ğŸ†</h3>
  <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„ÙØ±ÙŠÙ‚: <span id="teamTotal">0.00</span> â‚ª</p>
  <p>Ù†ØµÙŠØ¨Ùƒ Ù…Ù† Ø§Ù„Ø£Ø±Ø¨Ø§Ø­: <span id="leaderPercentage">0.00</span> â‚ª</p>
<!-- Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù‡Ù†Ø§ -->
<p>Ø£Ø±Ø¨Ø§Ø­Ùƒ Ø§Ù„Ø´Ø®ØµÙŠØ©: <span id="personalProfit">0.00</span> â‚ª</p>
<p>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ: <span id="totalEarnings">0.00</span> â‚ª</p>
<!-- Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¥Ø¶Ø§ÙØ© -->
</div>
<!-- Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¥Ø¶Ø§ÙØ© -->



    </div>
    
 <!-- ÙˆØ§Ø¬Ù‡Ø© Ø®Ø·Ø© Ø§Ù„Ø¹Ù…Ù„ -->
 <div id="workplan" class="employee-tab" style="display: none;">
   <div class="workplan-section">
     <h3>Ø®Ø·Ø© Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</h3>

     <div id="genderPrompt" class="gender-prompt">
  <h3>Ù…Ø±Ø­Ø¨Ù‹Ø§! Ø¨Ø¯Ø§ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© ğŸ’ª</h3>
  <p>Ø§Ø®ØªØ± Ø¬Ù†Ø³Ùƒ Ù„Ù†Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ ØªØ®ØµÙŠØµ Ø®Ø·ØªÙƒ:</p>
  <div class="gender-buttons">
    <button class="gender-btn male" onclick="setGender('male')">
      <i class="fas fa-mars"></i>
      Ø°ÙƒØ±
    </button>
    <button class="gender-btn female" onclick="setGender('female')">
      <i class="fas fa-venus"></i>
      Ø£Ù†Ø«Ù‰
    </button>
  </div>
</div>
 <div id="planContent" style="display: none;">



  <div id="planInstructions" class="workplan-instructions">
    <p><strong>Ø´Ø±Ø­ ØªÙ‚Ø³ÙŠÙ… Ø§Ù„ÙˆÙ‚Øª:</strong> Ø§Ø®ØªØ± ÙŠÙˆÙ…Ù‹Ø§ ÙÙŠ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø£Ùˆ Ø³Ø§Ø¹Ø© ÙÙŠ Ø§Ù„ÙŠÙˆÙ… Ù„ØªØ­Ø¶ÙŠØ± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù„Ù„Ù†Ø´Ø±ØŒ ÙˆÙˆØ²Ù‘Ø¹ ÙˆÙ‚ØªÙƒ Ø¨Ø­ÙŠØ« ØªØ®ØµØµ ÙƒÙ„ ÙŠÙˆÙ…/Ø³Ø§Ø¹Ø© Ù„ÙØ¦Ø© Ù…Ù†ØªØ¬ Ù…Ø®ØªÙ„ÙØ©.</p>
  </div>
  <h4>Ø§Ù„ÙØ¦Ø© Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§ Ù„Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…:</h4>
  <ul id="productList"></ul>

<!-- Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„ØªØ­ÙÙŠØ²ÙŠ -->
<div class="motivational-container">
  <p class="motivational-header">
    <strong>Ù…Ù† Ø§Ù„Ù‚Ù„Ø¨ Ù„Ù„Ù‚Ù„Ø¨</strong>
    <span class="emoji">â¤ï¸</span>
  </p>
  <div class="motivational-text">
    <p><strong>Ù‡Ø§Ù„Ø¯Ø±Ø¨ Ù…Ø§ Ø¨ÙŠØ·Ù„Ø¨ Ø¬Ø±ÙŠØŒ Ø¨ÙŠØ·Ù„Ø¨ Ø§Ø³ØªÙ…Ø±Ø§Ø±</strong></p>
    <p><strong>â€œØ´ÙˆÙŠØ© Ø´ÙˆÙŠØ©â€ ØªÙ…Ø´ÙŠ Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ©ØŒ ÙˆØ¨Ø§Ù„Ø±Ø§Ø­Ø© ØªÙƒØ³Ø¨ Ø§Ù„Ø®Ø¨Ø±Ø©.</strong></p>
    <p><strong>ÙƒÙ„ ÙŠÙˆÙ… Ø®Ø° ÙÙƒØ±Ø© ØµØºÙŠØ±Ø©ØŒ Ø¬Ø±Ù‘Ø¨Ù‡Ø§ ÙˆØ§Ù†Ø´Ø±Ù‡Ø§ØŒ ÙˆØ¨ÙƒØ±Ø© Ø¶Ø¨Ù‘Ø· Ø£ÙÙƒØ§Ø± Ø¬Ø¯ÙŠØ¯Ø©.</strong></p>
    <p><strong>Ø­ØªÙ‰ Ù„Ùˆ ÙˆÙ‚Ø¹ØªØŒ Ù‚ÙˆÙ… ÙˆØ¶Ø­Ùƒ: â€œÙ‚Ø·Ø±Ø© Ù‚Ø·Ø±Ø© Ø¨ØªØ­Ù Ø§Ù„ØµØ®Ø±â€.</strong></p>
    <p><strong>Ø§Ù„Ù…Ù‡Ù… ØªØ¸Ù„ ØªØ¨Ø¹Ø«Ø± Ø·Ø§Ù‚Ø© ÙˆØ¥ØµØ±Ø§Ø±ØŒ ÙˆØ§Ù„ØµØ¨Ø± Ù…Ø±Ø© ÙˆÙ„Ø­Ø¸ØªÙ‡ Ø­Ù„ÙˆØ©.</strong></p>
    <p><strong>Ø§Ù…Ø´ÙŠ ÙŠÙˆÙ… ÙˆØ±Ø§ ÙŠÙˆÙ…ØŒ ÙˆØ¨Ø§Ø¨ØªØ³Ø§Ù…Ø© Ø®ÙÙŠÙØ©ØŒ Ø±Ø­ ØªÙ„Ø­Ù‚ Ù†Ø¬Ø§Ø­ ÙƒØ¨ÙŠØ±!</strong></p>
  </div>
</div>
<!-- Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„ØªØ­ÙÙŠØ²ÙŠ -->

</div>

   </div>
 </div>
<!-- Ø¨Ø¯Ø§ÙŠØ© Ù‚Ø³Ù… Ù†ØµØ§Ø¦Ø­ Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…ÙŠØ© -->
<div id="instagramTips" class="employee-tab" style="display: none;">
  <div class="instagram-tips-section">
    <h3>Ù†ØµØ§Ø¦Ø­ Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…ÙŠØ©</h3>
    <ul id="instagramTipsList">
      
  <li>
    <strong>ÙƒÙŠÙ ØªØ¹Ù…Ù„ Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Ø¥Ù†Ø³ØªØ¬Ø±Ø§Ù…</strong>
    <ul>
      <li>Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ù„Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù‚Ø±ÙŠØ¨ Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</li>
      <li>ÙƒÙ„ Ù…Ø§ ÙŠØªÙØ§Ø¹Ù„ Ø§Ù„Ø¬Ù…Ù‡ÙˆØ± Ù…Ø¹ Ù…Ù†Ø´ÙˆØ±Ø§ØªÙƒ (Ø¥Ø¹Ø¬Ø§Ø¨ØŒ ØªØ¹Ù„ÙŠÙ‚ØŒ Ø­ÙØ¸ØŒ Ù…Ø´Ø§Ø±ÙƒØ©) Ø£Ø³Ø±Ø¹ØŒ Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Ø¥Ù†Ø³ØªØ§ ØªØ·Ù„Ø¹ Ù…Ø­ØªÙˆØ§Ùƒ Ù„Ù†Ø§Ø³ Ø£ÙƒØ«Ø±.</li>
      <li>Ø§Ù„ØªÙˆÙ‚ÙŠØª Ù…Ù‡Ù…: Ø£ÙˆÙ„ Ø³Ø§Ø¹Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ø´Ø± ØªØ­Ø¯Ø¯ Ù…Ø¯Ù‰ Ø§Ù†ØªØ´Ø§Ø±Ùƒ.</li>
    </ul>
  </li>
  <li>
    <strong>ØªÙˆÙ‚Ù‘Ø¹ Ø§Ù„Ø³Ù„ÙˆÙƒ</strong>
    <ul>
      <li>Ø¥Ù†Ø³ØªØ§ ØªØ­Ø§ÙˆÙ„ ØªØ¹Ø±Ù Ø£ÙŠ Ù†ÙˆØ¹ Ù…Ø­ØªÙˆÙ‰ ÙŠØ¹Ø¬Ø¨ Ù…ØªØ§Ø¨Ø¹ÙŠÙ†Ùƒ: Ø¥Ø°Ø§ ØªÙØ§Ø¹Ù„ÙˆØ§ Ø£ÙƒØ«Ø± Ù…Ø¹ Ø§Ù„Ø±ÙŠÙ„Ø²ØŒ Ø¨ØªØ²ÙŠØ¯ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø±ÙŠÙ„Ø².</li>
    </ul>
  </li>
  <li>
    <strong>Ø§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø±ÙŠØ© Ù…Ø¹ÙŠØ§Ø± Ø±Ø¦ÙŠØ³ÙŠ</strong>
    <ul>
      <li>Ø­Ø³Ø§Ø¨ Ù†Ø´Ø· Ø¨Ù†Ø´Ø± Ø¨Ø§Ù†ØªØ¸Ø§Ù… (ÙŠÙˆÙ…ÙŠÙ‘Ù‹Ø§ Ø£Ùˆ ÙƒÙ„ ÙŠÙˆÙ…ÙŠÙ†) Ø¨ÙŠÙƒØ³Ø¨ Ø«Ù‚Ø© Ø§Ù„Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ©.</li>
    </ul>
  </li>
</ul>

      <!-- Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© -->
    <h4>Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©:</h4>
    <table class="instagram-tips-table" style="width:100%; border-collapse: collapse; margin-bottom: 15px;">
      <thead>
        <tr>
          <th style="border: 1px solid #ddd; padding: 8px; background: #f0f0f0;">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰</th>
          <th style="border: 1px solid #ddd; padding: 8px; background: #f0f0f0;">Ø£Ù†Ø³Ø¨ Ø§Ù„ÙˆÙ‚Øª Ø¨Ù†Ø´Ø±Ù‡</th>
          <th style="border: 1px solid #ddd; padding: 8px; background: #f0f0f0;">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="border: 1px solid #ddd; padding: 8px;">Ø±ÙŠÙ„Ø² Reels</td>
          <td style="border: 1px solid #ddd; padding: 8px;">Ù¡Ù â€“Ù¡Ù¢ Ø¸Ù‡Ø±Ù‹Ø§ &amp; Ù§â€“Ù© Ù…Ø³Ø§Ø¡Ù‹</td>
          <td style="border: 1px solid #ddd; padding: 8px;">Ø¬Ù…Ù‡ÙˆØ± ÙŠØªØµÙØ­ Ù„Ù„ØªØ±ÙÙŠÙ‡ Ù‚Ø¨Ù„ Ø§Ù„ØºØ¯Ø§Ø¡ ÙˆØ¨Ø¹Ø¯ Ø§Ù„Ø´ØºÙ„/Ø§Ù„Ø¯Ø±Ø§Ø³Ø©</td>
        </tr>
        <tr>
          <td style="border: 1px solid #ddd; padding: 8px;">Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Posts</td>
          <td style="border: 1px solid #ddd; padding: 8px;">Ù¨â€“Ù¡Ù  ØµØ¨Ø§Ø­Ù‹Ø§ &amp; Ù¥â€“Ù§ Ù…Ø³Ø§Ø¡Ù‹</td>
          <td style="border: 1px solid #ddd; padding: 8px;">Ù„Ø­Ø¸Ø§Øª Ø§Ù„ØªØµÙØ­ Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ© ÙˆØ§Ù„Ù…Ø³Ø§Ø¦ÙŠØ©</td>
        </tr>
        <tr>
          <td style="border: 1px solid #ddd; padding: 8px;">Ø§Ù„Ù‚ØµØµ Stories</td>
          <td style="border: 1px solid #ddd; padding: 8px;">Ø·ÙˆØ§Ù„ Ø§Ù„ÙŠÙˆÙ… (ØªØ±ÙƒÙŠØ² Ø¨ÙŠÙ† Ù¡Ù¢â€“Ù£ Ø¹ØµØ±Ù‹Ø§)</td>
          <td style="border: 1px solid #ddd; padding: 8px;">Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø¸Ù‡ÙˆØ± Ù…Ø³ØªÙ…Ø±Ù‘ Ø¨ÙŠÙ† Ù…ØªØ§Ø¨Ø¹ÙŠÙ†Ùƒ</td>
        </tr>
      </tbody>
    </table>

    <!-- Ù†ØµÙŠØ­Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ© -->
    <p style="font-weight: bold; font-size: 16px; line-height: 1.4; margin-top: 10px;">
      Ù†ØµÙŠØ­Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ©: Ø¬Ø±Ù‘Ø¨ ØªØªØ§Ø¨Ø¹ ØªØ­Ù„ÙŠÙ„Ø§Øª Ø­Ø³Ø§Ø¨Ùƒ (Insights) ÙˆØªØ¶Ø¨Ø· Ø§Ù„Ø£ÙˆÙ‚Ø§Øª Ø­Ø³Ø¨ Ø¬Ù…Ù‡ÙˆØ±Ùƒ Ø¨Ø§Ù„Ø¶Ø¨Ø·Ø› Ù„ÙƒÙ„ Ø­Ø³Ø§Ø¨ Ø¥ÙŠÙ‚Ø§Ø¹Ù‡ Ø§Ù„Ø®Ø§Øµ.
    </p>
    <!-- Ø£Ø³Ù„ÙˆØ¨ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ù‚Ù„Ø¨ÙŠ -->
    <h4 style="font-weight: bold; margin-top: 20px;">Ø£Ø³Ù„ÙˆØ¨ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ù‚Ù„Ø¨ÙŠ:</h4>
    <ul style="margin-top: 10px; line-height: 1.6;">
      <li><strong>Ø§Ø³ØªØ®Ø¯Ù… ØµÙˆØ±Ùƒ Ø§Ù„Ø´Ø®ØµÙŠØ©</strong></li>
      <li>Ù„Ù‚Ø¹Ø¯Ø© Ø¨Ø§Ù„Ù‚Ù‡ÙˆØ©ØŒ Ø£Ùˆ ÙÙŠ Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©ØŒ Ø£Ùˆ Ù…Ø§Ø´ÙŠ ÙÙŠ Ø§Ù„Ø´Ø§Ø±Ø¹â€¦</li>
      <li>Ø¶Ø¹ ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ø´ÙƒÙ„ Ø£Ù†ÙŠÙ‚ ÙÙˆÙ‚ Ø®Ù„ÙÙŠØªÙƒ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ©ØŒ Ù…Ø«Ù„Ø§Ù‹ Ù…Ù„ØµÙ‚ ØµØºÙŠØ± (sticker) Ø£Ùˆ ÙØ±ÙŠÙ… Ø¨Ø³ÙŠØ·.</li>
      <li><strong>Ø§Ø­ÙƒÙŠ Ù‚ØµØ© Ù‚ØµÙŠØ±Ø© ÙˆØ´Ø§Ø±ÙƒÙ‡Ø§ Ù…Ø¹ Ù…ØªØ§Ø¨Ø¹ÙŠÙ†Ùƒ Ù…Ù† Ø­ÙŠØ§ØªÙƒ</strong></li>
      <li>Ù„ØºØ© Ø¨Ø³ÙŠØ·Ø©ØŒ ØµÙˆØªÙƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ ÙˆÙƒØ£Ù†Ùƒ Ø¹Ù… ØªØ­ÙƒÙŠ Ù„ØµØ§Ø­Ø¨Ùƒ.</li>
      <li><strong>Ø®Ù„ÙŠ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¥Ù†Ø³Ø§Ù†ÙŠ</strong></li>
      <li>Ø¥Ø¶Ø­Ùƒ ÙˆØ§Ø¨ØªØ³Ù…ØŒ Ø§Ø´ØªØºÙ„ Ø¨Ù„Ù‚Ø·Ø§Øª candid (ØºÙŠØ± Ù…ØµØ·Ù†Ø¹Ø©)ØŒ ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ù…ØªØ§Ø¨Ø¹ÙŠÙ†Ùƒ Ø¨Ø§Ù„Ù€ stickers ÙˆØ§Ù„Ù€ polls.</li>
    </ul>

    <!-- Ø§Ø®ØªØµØ§Ø± Ø§Ù„ÙÙƒØ±Ø© ÙˆØ¬Ø§Ø°Ø¨ÙŠØªÙ‡Ø§ -->
    <h4 style="font-weight: bold; margin-top: 20px;">Ø§Ø®ØªØµØ§Ø± Ø§Ù„ÙÙƒØ±Ø© ÙˆØ¬Ø§Ø°Ø¨ÙŠØªÙ‡Ø§:</h4>
    <ul style="margin-top: 10px; line-height: 1.6;">
      <li><strong>Ø´Ø±Ø­ Ø´ÙˆØ±Øª ÙˆÙÙˆØ±ÙŠ</strong></li>
      <li>Ù„Ø§ ØªØ²ÙŠØ¯ Ø¹Ù† Ù£ Ø¬Ù…Ù„ ÙÙŠ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚: â€œØ§Ù„Ù…Ø±Ø·Ø¨ Ù‡Ø°Ø§ Ø®ÙÙŠÙ Ø¬Ø¯Ù‹Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø´Ø±Ø©ØŒ Ø¨ÙŠØ§Ø®Ø¯ Ù„ÙˆÙ† Ø·Ø¨ÙŠØ¹ÙŠ ÙˆØ¨ÙŠØ­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø§Ù„ØªØ±Ø·ÙŠØ¨.â€</li>
      <li>Ø§Ø³ØªØ®Ø¯Ù… emojis Ù„ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ù†Øµ (ğŸŒ¿âœ¨ğŸ’§).</li>
      <li>Ø³ØªÙŠÙƒØ±Ø§Øª ØªÙØ§Ø¹Ù„ ÙˆØ£Ø³Ø¦Ù„Ø© ÙˆØ³ØªÙŠÙƒØ± Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª</li>
      <li>Ù…Ø«Ù„Ø§Ù‹: â€œÙ…ÙŠÙ† Ø¬Ø±Ø¨ Ø¹Ø·Ø± Ù†ÙŠÙƒØ³Ø§ Ø¨Ø¯ÙŠÙ„ Ø¨Ø±Ø§Ø¯Ø§ØŸ Ø®Ø¨Ø±ÙˆÙ†ÙŠ!â€</li>
      <li>â€œØ§Ø­ÙØ¸ÙˆØ§ Ø§Ù„ØµÙˆØ±Ø© Ø¹Ø´Ø§Ù† ØªØ±Ø¬Ø¹ÙˆØ§ Ù„Ù‡Ø§ ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ø¬Ø©.â€</li>
    </ul>

    <!-- ÙƒÙŠÙ ØªØ²ÙŠØ¯ Ø§Ù„ØªÙØ§Ø¹Ù„ ÙˆØ§Ù„ÙˆØµÙˆÙ„ -->
    <h4 style="font-weight: bold; margin-top: 20px;">ÙƒÙŠÙ ØªØ²ÙŠØ¯ Ø§Ù„ØªÙØ§Ø¹Ù„ ÙˆØ§Ù„ÙˆØµÙˆÙ„:</h4>
    <ul style="margin-top: 10px; line-height: 1.6;">
      <li><strong>Ø§Ø³ØªØºÙ„Ù‘ Ø§Ù„Ù€ Hashtags Ø¨Ø°ÙƒØ§Ø¡</strong></li>
      <li>Ù¥â€“Ù§ Ù‡Ø§Ø´ØªØ§ØºØ§Øª Ù…ØªØ®ØµØµØ© (Ù…Ø«Ù„Ø§Ù‹ #Ø¬Ù…Ø§Ù„_Ø·Ø¨ÙŠØ¹ÙŠ #mulberry #aaup #SkinCare)</li>
      <li>ÙÙ‡Ù… Ø§Ù„Ù€ niche ÙŠÙ„ÙŠ Ø¨ØªÙ†Ø´Ø± ÙÙŠÙ‡ ÙˆØ§Ø³ØªØ®Ø¯Ù… Ù‡Ø§Ø´ØªØ§ØºØ§Øª Ù…ØªØ¯Ø§ÙˆÙ„Ø© Ø¹Ù†Ø¯ Ø¬Ù…Ù‡ÙˆØ±Ùƒ.</li>
      <li><strong>Ø§Ù†Ø´Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø³ØªÙˆØ±ÙŠ Ø¨ÙƒØ«Ø±Ø©</strong></li>
      <li>Ù‚ØµØµ ØªÙØ§Ø¹Ù„ÙŠØ© (Ø§Ø³ØªØ¨ÙŠØ§Ù†ØŒ Ø³Ø¤Ø§Ù„ØŒ Ø´Ø±ÙŠØ· ØªÙ…Ø±ÙŠØ±).</li>
      <li>Ø±Ø§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø± Ù„Ù„Ù…Ù†ØªØ¬ (Swipe Up Ø£Ùˆ Sticker Ø§Ù„Ø±Ø§Ø¨Ø·).</li>
      <li><strong>ØªØ¹Ø§ÙˆÙ† Ù…Ø¹ Ø­Ø³Ø§Ø¨Ø§Øª ØµØºÙŠØ±Ø© (Micro-influencers)</strong></li>
      <li>ØªØ¨Ø§Ø¯Ù„ â€œØªØ§Ø¬â€ Ø£Ùˆ â€œShoutoutâ€ Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¸Ù‡ÙˆØ±.</li>
      <li><strong>ØªØ§Ø¨Ø¹ ÙˆØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø¬Ù…Ù‡ÙˆØ±Ùƒ</strong></li>
      <li>Ø¥Ø±ÙØ¹ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØªØ¹Ù„ÙŠÙ‚Ø§ØªÙƒ ÙˆØ±Ø¯ Ø¹Ù„ÙŠÙ‡Ø§ Ø®Ù„Ø§Ù„ Ø³Ø§Ø¹Ø©.</li>
      <li>Ø®Ù„ÙŠÙƒ Ù…ØªØ§Ø¨Ø¹ Ù„Ø¨ÙˆØ³ØªØ§ØªÙ‡Ù… ÙˆØ­Ø· Ù„Ø§ÙŠÙƒ ÙˆØªØ¹Ù„ÙŠÙ‚ Ø­ØªÙ‰ ÙŠØ±Ø¯ÙˆØ§ Ù„Ùƒ Ø§Ù„Ø¬Ù…ÙŠÙ„.</li>
      <li><strong>Ø¹ÙŠØ¯ Ù†Ø´Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¨Ø­Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©</strong></li>
      <li>Ø®Ø° Ù†ÙØ³ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø±ÙŠÙ„Ø² ÙˆÙ‚Ø·Ù‘Ø¹ Ù…Ù†Ù‡ Ù…Ù‚Ø·Ø¹ Ø³ØªÙˆØ±ÙŠØŒ Ø£Ùˆ Ø§Ù†Ø³Ø® Ø£Ù‡Ù… Ø¬Ù…Ù„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† ÙÙŠ Ø¨ÙˆØ³Øª Ø«Ø§Ø¨Øª.</li>
    </ul>

    <!-- Ø£Ù‡Ù… Ø´ÙŠØ¡ ØªÙØªÙƒØ±Ù‘Ù‡ -->
    <p style="font-weight: bold; font-size: 18px; margin-top: 20px; line-height: 1.5;">
      ğŸ¥‡ Ø£Ù‡Ù… Ø´ÙŠØ¡ ØªÙØªÙƒØ±Ù‘Ù‡:<br>
      â€œØ§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù‚Ø±ÙŠØ¨ Ù…Ù† Ù‚Ù„Ø¨ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯ + Ø§Ù„Ø´Ø±Ø­ Ø§Ù„Ù‚ØµÙŠØ± ÙˆØ§Ù„ÙˆØ§Ø¶Ø­ = ØªÙØ§Ø¹Ù„ Ø£Ø¹Ù„Ù‰ ÙˆØ§Ù†ØªØ´Ø§Ø± Ø£Ø³Ø±Ø¹.â€<br>
      Ø§Ù…Ø´ÙŠ Ø¹Ù„Ù‰ Ù‡Ø§Ù„Ù†ØµØ§ÙŠØ­ØŒ ÙˆØ¬Ø±Ø¨ ÙƒÙ„ Ø¹Ù†ØµØ± Ø¨Ø®ÙØ© ÙˆØ±ÙˆØ­ Ù…Ø±Ø­Ø©ØŒ ÙˆÙ…Ø¹ Ø§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø±ÙŠØ© Ø±Ø­ ØªÙ„Ø§Ù‚ÙŠ Ø­Ø³Ø§Ø¨Ùƒ Ø¹Ù… ÙŠÙƒØ¨Ø± ÙˆØ§Ù†Øª Ø¹Ù… ØªØ³ØªÙ…ØªØ¹ Ø¨Ø§Ù„ØªØ¬Ø±Ø¨Ø©!
    </p>

  </div>
</div>
<!-- Ù†Ù‡Ø§ÙŠØ© Ù‚Ø³Ù… Ù†ØµØ§Ø¦Ø­ Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…ÙŠØ© -->


    




<!-- Orders Tab -->
<div id="orders" class="employee-tab" style="display: none;">
  <h2 style="margin-bottom:15px;">Ø§Ù„Ø·Ù„Ø¨ÙŠØ§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ</h2>
  <div id="ordersContainer" class="order-cards"></div>
</div>







  </div>
  
  <script>
    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyAi3_y7ugKB0cgzMV1-IVvbE2BwG_9RKSs",
      authDomain: "team-analysis-3c196.firebaseapp.com",
      databaseURL: "https://team-analysis-3c196-default-rtdb.firebaseio.com",
      projectId: "team-analysis-3c196",
      storageBucket: "team-analysis-3c196.firebasestorage.app",
      messagingSenderId: "38968485922",
      appId: "1:38968485922:web:667832a4aa77599ba8a6fb",
      measurementId: "G-853WkH2JK7"
    };
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();


    // ØªÙ‡ÙŠØ¦Ø© Firestore
    const firestore = firebase.firestore();

    // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªØ±Ø¬Ù…Ø©
    let currentLanguage = 'ar';
    const translations = {
      ar: {
        employeeDashboard: "Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙˆØ¸Ù",
        welcome: "Ø£Ù‡Ù„Ø§Ù‹, ",
        logout: "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬",
        tabAnalytics: "ØªØ­Ù„ÙŠÙ„Ø§Øª",
        tabSettings: "Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",
        filterLabel: "ØªØµÙÙŠØ© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø­Ø³Ø¨:",
        radioDay: "ÙŠÙˆÙ…",
        radioMonth: "Ø´Ù‡Ø±",
        radioPeriod: "ÙØªØ±Ø© Ù…Ø®ØµØµØ©",
        salesHeader: "Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØ§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ",
        tableHeaders: {
          product: "Ø§Ù„Ù…Ù†ØªØ¬",
          sale: "Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (â‚ª)",
          date: "Ø§Ù„ØªØ§Ø±ÙŠØ®"
        },
        salesSummary: (totalSales, totalProfit) => `Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª: ${totalSales} | Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­: â‚ª${totalProfit}`,
        settingsHeader: "Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨",
        changeUsername: "ØªØºÙŠÙŠØ± Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:",
        changePassword: "ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:",
        changePhoto: "ØªØºÙŠÙŠØ± Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©:",
        updateSettings: "ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",
        langToggle: "",
        chatInputPlaceholder: "Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ..."
      },
      en: {
        employeeDashboard: "Employee Dashboard",
        welcome: "Welcome, ",
        logout: "Logout",
        tabAnalytics: "Analytics",
        tabSettings: "Settings",
        filterLabel: "Filter Sales By:",
        radioDay: "Day",
        radioMonth: "Month",
        radioPeriod: "Custom Period",
        salesHeader: "Your Sales & Profit Data",
        tableHeaders: {
          product: "Product",
          sale: "Sale Price (â‚ª)",
          date: "Date"
        },
        salesSummary: (totalSales, totalProfit) => `Total Sales: ${totalSales} | Total Profit: â‚ª${totalProfit}`,
        settingsHeader: "Account Settings",
        changeUsername: "Change Username:",
        changePassword: "Change Password:",
        changePhoto: "Change Personal Photo:",
        updateSettings: "Update Settings",
        langToggle: "",
        chatInputPlaceholder: "Type your message..."
      }
    };

    // Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ù…Ø®Ø²Ù† ÙÙŠ localStorage
    let employeeName = localStorage.getItem('employeeName');



const empKey = localStorage.getItem('employeeKey');

// ÙØ­Øµ ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø­Ø³Ø§Ø¨ ÙƒÙ„ 3 Ø«ÙˆØ§Ù†ÙŠ Ø¨Ø´ÙƒÙ„ Ø¢Ù…Ù†
if (empKey) {
  setInterval(() => {
    database.ref('employeeAccounts/' + empKey).once('value')
      .then(snapshot => {
        if (!snapshot.exists()) {
          logout(); // ØªÙ… Ø­Ø°Ù Ø§Ù„Ø­Ø³Ø§Ø¨ => ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬
        }
      })
      .catch(error => {
        console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ÙØ­Øµ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ:", error);
      });
  }, 3000);
}





    if (!employeeName) {
      alert("Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¬Ù„Ø³Ø© Ø§Ù„Ù…ÙˆØ¸Ù. Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
      window.location.href = "index.html";
    }





    document.getElementById('employeeNameDisplay').textContent = translations[currentLanguage].welcome + employeeName;








// âœ… Ø§Ø¨Ø¯Ø£ Ù…Ù† Ù‡Ù†Ø§ Ø¨Ø¥Ø¶Ø§ÙØ© ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©
let isLeader = false;

database.ref('employees').orderByChild('name').equalTo(employeeName).once('value')
  .then(snapshot => {
    snapshot.forEach(child => {
      const data = child.val();
      if (data.leader) {
  isLeader = true;
  document.body.classList.add('leader-theme');
  
  const badge = document.createElement('div');
  badge.className = 'leader-badge leader-glow';
  badge.innerHTML = `
    <i class="fas fa-crown"></i>
    <span>Ù‚Ø§Ø¦Ø¯ Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ù…Ù…ÙŠØ²</span>
    <div class="badge-sparkles"></div>
  `;
  
  // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø§Ù„Ø´Ø±Ø§Ø±Ø§Øª
  const sparkles = document.createElement('div');
  sparkles.style.cssText = `
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 9999;
  `;
  document.body.prepend(sparkles, badge);
  
  // ØªÙˆÙ„ÙŠØ¯ Ø´Ø±Ø§Ø±Ø§Øª Ù…ØªØ­Ø±ÙƒØ©
  setInterval(() => {
    const spark = document.createElement('div');
    spark.style.cssText = `
      position: absolute;
      width: 4px;
      height: 4px;
      background: rgba(255,255,255,0.8);
      border-radius: 50%;
      top: ${Math.random() * 100}%;
      left: ${Math.random() * 100}%;
      animation: spark-fall ${2 + Math.random() * 3}s linear infinite;
    `;
    spark.innerHTML = `<style>
      @keyframes spark-fall {
        0% { transform: translateY(-100vh); opacity: 1; }
        100% { transform: translateY(100vh); opacity: 0; }
      }
    </style>`;
    sparkles.appendChild(spark);
    setTimeout(() => spark.remove(), 3000);
  }, 100);
}
    });
  })
  .then(() => {
    // Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£ØµÙ„ÙŠ Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø·
    database.ref('employees').orderByChild('name').equalTo(employeeName).once('value')
    .then(snapshot => {
      snapshot.forEach(child => {
        const data = child.val();
        const points = data.target || 0;
// Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù…Ù† Ù‡Ù†Ø§
if (data.leader) {
  isLeader = true;
  document.body.classList.add('leader-theme');
  // ... (Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø³Ø§Ø¨Ù‚ Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø´Ø§Ø±Ø©)
  showLeaderBonus(child.key); // â¬…ï¸ Ù‡Ø°Ù‡ Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
}
// Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¥Ø¶Ø§ÙØ©
        document.getElementById('employeeTargetDisplay').textContent = `Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ${points} Ù†Ù‚Ø·Ø©`;
      });
    });
  });






database.ref('employees').orderByChild('name').equalTo(employeeName).once('value')
  .then(snapshot => {
    snapshot.forEach(child => {
      const data = child.val();
      const points = data.target || 0;
      document.getElementById('employeeTargetDisplay').textContent = `Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ${points} Ù†Ù‚Ø·Ø©`;
    });
  });


    

    // Ø§Ø³ØªØ±Ø¬Ø§Ø¹ ØªØ¹ÙŠÙŠÙ†Ø§Øª Ø§Ù„Ø¨Ø§Ø¦Ø¹ Ø§Ù„Ù…Ù…ÙŠØ²
    let topSellerDesignations = {};
    database.ref('topSellerDesignations').on('value', snapshot => {
      topSellerDesignations = snapshot.val() || {};
    });

    // Ø¯Ø§Ù„Ø© Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù†Ø³Ø¨Ø© Ø§Ù„Ø¨Ø§Ø¦Ø¹ Ø§Ù„Ù…Ù…ÙŠØ²
    function getTopSellerRate(empName, saleDate) {
      let rate = 0.5; // Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ø¹Ø§Ø¯ÙŠ
      for (const key in topSellerDesignations) {
        const des = topSellerDesignations[key];
        if (des.employee === empName) {
          const start = new Date(des.startDate);
          const end = new Date(des.endDate);
          const saleDt = new Date(saleDate);
          if (saleDt >= start && saleDt <= end) {
            rate = 0.6;
            break;
          }
        }
      }
      return rate;
    }

    // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ù…Ø¹ Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ (ØªÙ… Ø­Ø°Ù Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£ØµÙ„ÙŠ)
    function loadSalesData() {
      // Ø§Ù„Ø­ØµÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹ Ø¹Ù„Ù‰ Ù†ÙˆØ¹ Ø§Ù„Ù…ÙˆØ¸Ù Ù…Ù† Realtime Database
      database.ref('employees').orderByChild('name').equalTo(employeeName).once('value')
      .then(empSnapshot => {
        let employeeType = "regular";
        empSnapshot.forEach(child => { employeeType = child.val().type; });
        // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù…ÙˆØ¸Ù
        database.ref('sales').orderByChild('seller').equalTo(employeeName).once('value')
        .then(snapshot => {
          const salesData = snapshot.val() || {};
          let totalSales = 0;
          let totalProfit = 0;
          // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¨Ø¯ÙˆÙ† Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£ØµÙ„ÙŠ
          let tableHTML = `<table><tr>
            <th>${translations[currentLanguage].tableHeaders.product}</th>
            <th>${translations[currentLanguage].tableHeaders.sale}</th>
            <th>${translations[currentLanguage].tableHeaders.date}</th>
            </tr>`;
          const filterType = document.querySelector('input[name="filterType"]:checked').value;
let filterFn = sale => true;

// âœ… ÙÙ„ØªØ±Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ©: Ø¹Ø±Ø¶ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¥Ø°Ø§ Ù…Ø§ ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠ ØªÙˆØ§Ø±ÙŠØ®
if (!document.getElementById('filterDayInput').value &&
    !document.getElementById('filterMonthInput').value &&
    !document.getElementById('filterStartDate').value &&
    !document.getElementById('filterEndDate').value) {
  const today = new Date();
  const year = today.getFullYear();
  const month = (today.getMonth() + 1).toString().padStart(2, '0');
  const currentMonth = `${year}-${month}`;
  filterFn = sale => sale.date.startsWith(currentMonth);
}


          if (filterType === "day") {
            const day = document.getElementById('filterDayInput').value;
            if (day) { filterFn = sale => sale.date.slice(0,10) === day; }
          } else if (filterType === "month") {
            const month = document.getElementById('filterMonthInput').value;
            if (month) { filterFn = sale => sale.date.startsWith(month); }
          } else if (filterType === "period") {
            const start = new Date(document.getElementById('filterStartDate').value);
            const end = new Date(document.getElementById('filterEndDate').value);
            if(document.getElementById('filterStartDate').value && document.getElementById('filterEndDate').value) {
              filterFn = sale => {
                const saleDate = new Date(sale.date);
                return saleDate >= start && saleDate <= end;
              };
            }
          }
          for (const key in salesData) {
            const sale = salesData[key];
            if (!filterFn(sale)) continue;
            totalSales++;
            const rawProfit = parseFloat(sale.salePrice) - parseFloat(sale.originalPrice);
            let percentage = 0.5; // Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
            if (employeeType === "distinguished") {
              percentage = 0.7;
            } else if (employeeType === "regular") {
              percentage = getTopSellerRate(employeeName, sale.date);
            }
            totalProfit += rawProfit * percentage;
            tableHTML += `<tr>
              <td>${sale.productName}</td>
              <td>â‚ª${sale.salePrice}</td>
              <td>${new Date(sale.date).toLocaleDateString()}</td>
              </tr>`;
          }
          tableHTML += "</table>";
          document.getElementById('salesData').innerHTML = tableHTML;
          document.getElementById('salesSummary').innerHTML = `<p>${translations[currentLanguage].salesSummary(totalSales, totalProfit.toFixed(2))}</p>`;
        });
      });
    }
    loadSalesData();

    // ØªØ¨Ø¯ÙŠÙ„ Ø¹Ø±Ø¶ Ù…Ø¯Ø®Ù„Ø§Øª Ø§Ù„ÙÙ„ØªØ±Ø©
    function toggleFilterInputs(type) {
      document.getElementById('filterDay').style.display = (type === 'day') ? 'block' : 'none';
      document.getElementById('filterMonth').style.display = (type === 'month') ? 'block' : 'none';
      document.getElementById('filterPeriod').style.display = (type === 'period') ? 'block' : 'none';
    }

 
// Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù…Ù† Ù‡Ù†Ø§
async function calculateTeamProfit(leaderKey) {
  try {
    const filterFn = createDateFilter(); // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙƒØ©
    const leaderSnapshot = await database.ref(`employees/${leaderKey}`).once('value');
    const leaderData = leaderSnapshot.val();

    if (!leaderData.team) return 0;

    const allEmployees = (await database.ref('employees').once('value')).val();
    let totalProfit = 0;

    for (const memberKey of leaderData.team) {
      const member = allEmployees[memberKey];
      if (!member) continue;

      const sales = (await database.ref('sales')
        .orderByChild('seller')
        .equalTo(member.name)
        .once('value')).val();

      for (const key in sales) {
        const sale = sales[key];
        if (filterFn(sale)) { // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„ØªØ±Ø© Ù‡Ù†Ø§
          totalProfit += (sale.salePrice - sale.originalPrice) * 0.5;
        }
      }
    }

    return totalProfit;

  } catch (error) {
    console.error("ÙØ´Ù„ Ø­Ø³Ø§Ø¨ Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„ÙØ±ÙŠÙ‚:", error);
    return 0;
  }
}

async function showLeaderBonus(leaderKey) {
  if (!isLeader) return;

  try {
    const filterFn = createDateFilter(); // Ù†ÙØ³ Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙƒØ©
    
    // Ø­Ø³Ø§Ø¨ Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„ÙØ±ÙŠÙ‚
    const teamProfit = await calculateTeamProfit(leaderKey);
    
    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø´Ø®ØµÙŠØ© Ù…Ø¹ Ù†ÙØ³ Ø§Ù„ÙÙ„ØªØ±Ø©
    const personalSales = (await database.ref('sales')
      .orderByChild('seller')
      .equalTo(employeeName)
      .once('value')).val();

    let personalProfit = 0;
    for (const key in personalSales) {
      const sale = personalSales[key];
      if (filterFn(sale)) { // ØªØ·Ø¨ÙŠÙ‚ Ù†ÙØ³ Ø§Ù„ÙÙ„ØªØ±Ø©
        personalProfit += (sale.salePrice - sale.originalPrice) * 0.5;
      }
    }

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
    document.getElementById('leaderBonus').style.display = 'block';
    document.getElementById('teamTotal').textContent = teamProfit.toFixed(2);
    document.getElementById('leaderPercentage').textContent = (teamProfit * 0.1).toFixed(2);
    document.getElementById('personalProfit').textContent = personalProfit.toFixed(2);
    document.getElementById('totalEarnings').textContent = (personalProfit + (teamProfit * 0.1)).toFixed(2);

  } catch (error) {
    console.error("ÙØ´Ù„ Ø¹Ø±Ø¶ Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„Ù‚Ø§Ø¦Ø¯:", error);
  }
}
// Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¥Ø¶Ø§ÙØ©
   



    /* ------------------ ØªØºÙŠÙŠØ± Ø§Ù„Ø£Ù„Ø³Ù†Ø© ------------------ */
    function showEmployeeTab(tabName, event) {
      document.querySelectorAll('.employee-tab').forEach(tab => tab.style.display = 'none');
      document.querySelectorAll('.tab-nav button').forEach(btn => btn.classList.remove('active'));
      event.currentTarget.classList.add('active');
      document.getElementById(tabName).style.display = 'block';
if (tabName === 'orders') {
    loadOrders();
  }
    }

   


function loadOrders() {
  const container = document.getElementById('ordersContainer');

  database.ref('orders').on('value', snap => {
    const allOrders = snap.val() || {};const data = Object.entries(allOrders)
  .filter(([id, o]) =>
    o.employee &&
    o.employee.toLowerCase().trim() === employeeName.toLowerCase().trim()
  )
  .sort((a, b) => {
    const dateA = new Date(a[1].date);
    const dateB = new Date(b[1].date);
    return dateB - dateA; // Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹
  });


    container.innerHTML = '';
    const shownOrders = {};

    if (data.length === 0) {
      container.innerHTML = '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨ÙŠØ§Øª Ø­Ø§Ù„ÙŠØ§Ù‹.</p>';
      return;
    }

    data.forEach(([id, order]) => {
      if (shownOrders[id]) return;
      shownOrders[id] = true;

      let emoji = 'â³';
      if (order.status === 'Ù‚ÙŠØ¯ Ø§Ù„ØªÙˆØµÙŠÙ„') emoji = 'ğŸšš';
      else if (order.status === 'ØªÙ… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…') emoji = 'âœ”ï¸';

      let productsHTML = '<ul style="padding-left:16px;margin:10px 0;">';
      if (Array.isArray(order.products)) {
        order.products.forEach(p => {
          productsHTML += `<li>${p.name} â€” â‚ª${parseFloat(p.price).toFixed(2)}</li>`;
        });
      } else {
        productsHTML += '<li>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù…Ø³Ø¬Ù„Ø©</li>';
      }
      productsHTML += '</ul>';

      const card = document.createElement('div');
      card.className = 'order-card';
      card.innerHTML = `
        <h3>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ÙŠØ©</h3>
        <p>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: ${order.count}</p>
        ${productsHTML}
        <p>Ù†ÙˆØ¹ Ø§Ù„ØªÙˆØµÙŠÙ„: ${order.type}${order.type === 'delivery' ? ` (â‚ª${order.deliveryPrice})` : ''}</p>
        <p>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: â‚ª${parseFloat(order.total).toFixed(2)}</p>
        <p class="status">Ø§Ù„Ø­Ø§Ù„Ø©: ${order.status}<span class="emoji">${emoji}</span></p>
      `;
      container.appendChild(card);
    });
  }, err => {
    console.error("Ø®Ø·Ø£ Ø¨Ø¬Ù„Ø¨ Ø§Ù„Ø·Ù„Ø¨ÙŠØ§Øª:", err);
    container.innerHTML = '<p>Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø·Ù„Ø¨ÙŠØ§Øª.</p>';
  });
}



// Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ loadOrders Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ ØªØ¨ÙˆÙŠØ¨ "Ø§Ù„Ø·Ù„Ø¨ÙŠØ§Øª"
document.getElementById('tabOrdersBtn').addEventListener('click', () => {
  loadOrders();
});







    /* ------------------ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ ------------------ */
    function logout() {
      localStorage.clear();
      window.location.href = "index.html";
    }

// ====== Ø¨ÙŠØ§Ù†Ø§Øª ÙØ¦Ø§Øª Ø®Ø·Ø© Ø§Ù„Ø¹Ù…Ù„ ======
const workPlanCategories = {
  male: [
    "Ù…Ø¹Ø§Ù„Ø¬Ø§Øª ÙˆØ³ÙŠØ±ÙˆÙ… Ù„Ù„ÙˆØ¬Ù‡","Ù…Ø±Ø·Ø¨Ø§Øª ÙˆÙƒØ±ÙŠÙ…Ø§Øª Ù„Ù„ÙˆØ¬Ù‡","Ø§Ù„Ø¨Ø´Ø±Ø© ÙˆØ§Ù„ÙˆØ¬Ù‡",
    "Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø­Ù„Ø§Ù‚Ø© Ù„Ù„Ø±Ø¬Ø§Ù„","Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¹Ù†Ø§ÙŠØ© Ù„Ù„Ø±Ø¬Ø§Ù„","Ù…Ø²ÙŠÙ„Ø§Øª Ø¹Ø±Ù‚ Ù„Ù„Ø±Ø¬Ø§Ù„",
    "Ø¹Ø·ÙˆØ±","Ø¹Ø·ÙˆØ± Ù„Ù„Ø±Ø¬Ø§Ù„","ØªØµÙÙŠÙ Ø§Ù„Ø´Ø¹Ø±","ØºØ³ÙˆÙ„Ø§Øª","Ø³ÙŠØ±ÙˆÙ… ÙˆØ²ÙŠÙˆØª Ù„Ù„Ø´Ø¹Ø±",
    "Ø´Ø§Ù…Ø¨Ùˆ","Ø§Ù„Ø¹Ù†Ø§ÙŠØ© Ø¨Ø§Ù„Ø´Ø¹Ø±","Ø§Ù„ÙˆÙ‚Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø´Ù…Ø³ ÙˆØ§Ù„ØªØ³Ù…ÙŠØ±","Ø§Ù„Ø¹Ù†Ø§ÙŠØ© Ø¨Ø§Ù„Ø£Ø³Ù†Ø§Ù†",
    "Ø§Ù„Ø¹Ù†Ø§ÙŠØ© Ø¨Ø§Ù„ÙÙ…"
  ],
  female: [
    "Ø§Ù„Ø¹Ù†Ø§ÙŠØ© Ø¨Ø§Ù„Ø¬Ø³Ù…","Ù…Ø±Ø·Ø¨ Ù„Ù„Ø¬Ø³Ù…","Ø§Ù„Ø¨Ø´Ø±Ø© ÙˆØ§Ù„ÙˆØ¬Ù‡","Ù…Ø±Ø·Ø¨Ø§Øª ÙˆÙƒØ±ÙŠÙ…Ø§Øª Ù„Ù„ÙˆØ¬Ù‡",
    "Ù…Ø¹Ø·Ø± Ù„Ù„Ø¬Ø³Ù…","Ù…Ù‚Ø´Ø±Ø§Øª ÙˆÙ…Ù„Ù…Ø¹Ø§Øª Ø§Ù„Ø¬Ø³Ù…","Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª Ø§Ù„Ø¹Ù†Ø§ÙŠØ© Ø§Ù„Ø´Ø®ØµÙŠØ©",
    "Ù…Ø¹Ø§Ù„Ø¬Ø§Øª ÙˆØ³ÙŠØ±ÙˆÙ… Ù„Ù„ÙˆØ¬Ù‡","Ù…Ù†ØªØ¬Ø§Øª ØªÙ‚Ø´ÙŠØ± Ø§Ù„Ø¬Ø³Ù…","ØªÙØªÙŠØ­","Ø¹Ø·ÙˆØ± Ù„Ù„Ù†Ø³Ø§Ø¡","Ø¹Ø·ÙˆØ±",
    "Ø§Ù„Ø¹Ù†Ø§ÙŠØ© Ø¨Ø§Ù„Ù‚Ø¯Ù…","Ø§Ù„Ù†Ø¸Ø§ÙØ© Ø§Ù„Ø´Ø®ØµÙŠØ© Ù„Ù„Ù†Ø³Ø§Ø¡","ØµØ§Ø¨ÙˆÙ† Ø§Ø³ØªØ­Ù…Ø§Ù…","Ø§Ù„Ø¹Ù†Ø§ÙŠØ© Ø¨Ø§Ù„ÙŠØ¯ÙŠÙ†",
    "Ø£Ù‚Ù†Ø¹Ø© Ø§Ù„ÙˆØ¬Ù‡","Ø§Ù„ÙˆØ¬Ù‡","Ø§Ù„ÙˆÙ‚Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø´Ù…Ø³ ÙˆØ§Ù„ØªØ³Ù…ÙŠØ±",
    "Ø§Ù„Ø¹Ù†Ø§ÙŠØ© Ø¨Ø§Ù„Ø£Ø³Ù†Ø§Ù†","Ø§Ù„Ø¹Ù†Ø§ÙŠØ© Ø¨Ø§Ù„ÙÙ…","Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø´Ø¹Ø±",
    "Ø§Ù„Ø¹Ù†Ø§ÙŠØ© Ø¨Ø§Ù„Ø­ÙˆØ§Ù…Ù„ ÙˆØ§Ù„Ù…Ø±Ø¶Ø¹Ø©","Ù…Ø²ÙŠÙ„Ø§Øª Ø¹Ø±Ù‚ Ù„Ù„Ù†Ø³Ø§Ø¡"
  ]
};


// ====== Ù¡) Ø¥Ù†Ø´Ø§Ø¡ shuffle Ø«Ø§Ø¨Øª Ù„ÙƒÙ„ Ù…ÙˆØ¸Ù Ø­Ø³Ø¨ Ø§Ø³Ù…Ù‡ ÙˆØ¬Ù†Ø³Ù‡ ======
function getEmployeeOrder(gender) {
  // Ù¡. Ø¥Ø­Ø¶Ø§Ø± Ù…ØµÙÙˆÙØ© Ø§Ù„ÙØ¦Ø§Øª
  const cats = [...workPlanCategories[gender]];
  // Ù¢. Ø¨Ù†Ø§Ø¡ seed Ù…Ù† Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù ÙˆØ§Ù„Ø¬Ù†Ø³
  let seed = 0;
  for (let i = 0; i < employeeName.length; i++) {
    seed = (seed * 31 + employeeName.charCodeAt(i)) % 2147483647;
  }
  seed = (seed + (gender === 'male' ? 1 : 2)) % 2147483647;
  // Ù£. LCG Ù„ØªÙˆÙ„ÙŠØ¯ Ø£Ø±Ù‚Ø§Ù… Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
  let rnd = seed;
  function next() {
    rnd = (rnd * 16807) % 2147483647;
    return (rnd - 1) / 2147483646;
  }
  // Ù¤. Fisherâ€“Yates shuffle
  for (let i = cats.length - 1; i > 0; i--) {
    const j = Math.floor(next() * (i + 1));
    [cats[i], cats[j]] = [cats[j], cats[i]];
  }
  return cats;
}

// ====== Ù¢) Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØ¦Ø© Ù„Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© ======
function getCategoryForToday(gender) {
  const order = getEmployeeOrder(gender);
  // Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… Ù…Ù†Ø° 1 ÙŠÙ†Ø§ÙŠØ± 1970
  const daysSinceEpoch = Math.floor(Date.now() / (1000 * 60 * 60 * 24));
  // Ø§Ù„Ù…ÙˆØ¶Ø¹ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
  const idx = daysSinceEpoch % order.length;
  return order[idx];
}

// ====== Ù£) Ø¹Ø±Ø¶ ÙØ¦Ø© Ø§Ù„ÙŠÙˆÙ… ÙÙ‚Ø· ======
function showPlan(gender) {
  const listEl = document.getElementById('productList');
  listEl.innerHTML = '';
  
  const todayCat = getCategoryForToday(gender);
  
  const card = document.createElement('div');
  card.className = 'category-card';
  card.innerHTML = `
    <div class="category-header">
      <i class="fas fa-calendar-day"></i>
      <h4>Ø§Ù„ÙØ¦Ø© Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§ Ù„ÙŠÙˆÙ… ${new Date().toLocaleDateString('ar-EG')}</h4>
    </div>
    <div class="category-content">
      <span class="category-badge">${todayCat}</span>
      <button class="info-btn" onclick="showCategoryTips('${todayCat}')">
        <i class="fas fa-lightbulb"></i>
        Ù†ØµØ§Ø¦Ø­ Ø®Ø§ØµØ©
      </button>
    </div>
  `;
  
  listEl.appendChild(card);
  document.getElementById('planContent').style.display = 'block';
}



// Ø­ÙØ¸ Ø§Ù„Ø¬Ù†Ø³ ÙÙŠ Firestore ÙˆØ¹Ø±Ø¶ Ø§Ù„Ø®Ø·Ø©
// ====== Ø¯Ø§Ù„Ø© setGender Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Realtime Database ======
function setGender(gender) {
  console.log("setGender called with:", gender);
  // Ø¥Ø®ÙØ§Ø¡ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø³Ø¤Ø§Ù„
  document.getElementById('genderPrompt').style.display = 'none';
  // Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø·Ø© ÙÙˆØ±Ø§Ù‹
  showPlan(gender);

  // ØªØ­Ø¯ÙŠØ« ÙØ¦Ø© gender ÙÙŠ Ø§Ù„Ù€Realtime Database
  database.ref('employees')
    .orderByChild('name')
    .equalTo(employeeName)
    .once('value')
    .then(snapshot => {
      snapshot.forEach(child => {
        // child.key Ù‡Ùˆ Ø§Ù„Ù€ ID Ù„ÙƒÙ„ Ù…ÙˆØ¸Ù
        database.ref('employees/' + child.key)
          .update({ gender: gender })
          .then(() => console.log("Gender saved to Realtime DB"))
          .catch(err => console.error("Error saving gender:", err));
      });
    })
    .catch(err => console.error("Error querying employees:", err));
}





// Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ ØªØ¨ÙˆÙŠØ¨ â€œØ®Ø·Ø© Ø§Ù„Ø¹Ù…Ù„â€ (Realtime DB)
document.getElementById('tabWorkPlanBtn').addEventListener('click', () => {
  database.ref('employees')
    .orderByChild('name')
    .equalTo(employeeName)
    .once('value')
    .then(snapshot => {
      let gender = null;
      snapshot.forEach(child => { gender = child.val().gender; });
      if (gender) {
        document.getElementById('genderPrompt').style.display = 'none';
        showPlan(gender);
      } else {
        document.getElementById('genderPrompt').style.display = 'block';
        document.getElementById('planContent').style.display = 'none';
      }
    })
    .catch(err => console.error("Error fetching gender:", err));
});













// Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù…Ù† Ù‡Ù†Ø§
if (isLeader) {
  setInterval(async () => {
    const snapshot = await database.ref('employees').orderByChild('name').equalTo(employeeName).once('value');
    snapshot.forEach(child => {
      showLeaderBonus(child.key);
    });
  }, 60000); // ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
}
// Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¥Ø¶Ø§ÙØ©













// Ø£Ø¶Ù Ù‡Ø°Ù‡ Ø§Ù„Ø¯Ø§Ù„Ø© ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù…Ø¹ Ø¨Ù‚ÙŠØ© Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
function createDateFilter() {
  const filterType = document.querySelector('input[name="filterType"]:checked').value;
  let filterFn = (sale) => true;
  let startDate, endDate;

  // Ø§Ù„ÙÙ„ØªØ±Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© (Ø´Ù‡Ø± Ø­Ø§Ù„ÙŠ)
  if (!document.getElementById('filterDayInput').value &&
      !document.getElementById('filterMonthInput').value &&
      !document.getElementById('filterStartDate').value &&
      !document.getElementById('filterEndDate').value) {
    const today = new Date();
    startDate = new Date(today.getFullYear(), today.getMonth(), 1);
    endDate = new Date(today.getFullYear(), today.getMonth() + 1, 0);
  } else {
    switch(filterType) {
      case 'day':
        const day = document.getElementById('filterDayInput').value;
        if (day) {
          startDate = new Date(day);
          endDate = new Date(day);
          endDate.setHours(23, 59, 59);
        }
        break;
      
      case 'month':
        const month = document.getElementById('filterMonthInput').value;
        if (month) {
          const [year, m] = month.split('-');
          startDate = new Date(year, m - 1, 1);
          endDate = new Date(year, m, 0);
        }
        break;
      
      case 'period':
        startDate = new Date(document.getElementById('filterStartDate').value);
        endDate = new Date(document.getElementById('filterEndDate').value);
        break;
    }
  }

  if (startDate && endDate) {
    endDate.setHours(23, 59, 59); // Ù„ØªØ´Ù…Ù„ Ø§Ù„ÙŠÙˆÙ… ÙƒØ§Ù…Ù„
    filterFn = (sale) => {
      const saleDate = new Date(sale.date);
      return saleDate >= startDate && saleDate <= endDate;
    };
  }

  return filterFn;
}









document.querySelector('.filter-section button').onclick = () => {
  // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„ØªØ±Ø© Ø¹Ù„Ù‰ ÙƒÙ„Ø§ Ø§Ù„Ù‚Ø³Ù…ÙŠÙ†
  loadSalesData();
  loadRewards();           // â† Ù‡Ù†Ø§ Ù†Ø¹ÙŠØ¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª Ø­Ø³Ø¨ Ø§Ù„ÙÙ„ØªØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯

  
  if (isLeader) {
    database.ref('employees')
      .orderByChild('name')
      .equalTo(employeeName)
      .once('value')
      .then(snapshot => {
        snapshot.forEach(child => showLeaderBonus(child.key));
      });
  }
  
  // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© ÙÙŠ Ù‚Ø³Ù… Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©
  const filterFn = createDateFilter();
  const [start, end] = getFilterDates();
  updateLeaderFilterDisplay(start, end);
}

// Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆØ§Ø±ÙŠØ®
function getFilterDates() {
  const filterType = document.querySelector('input[name="filterType"]:checked').value;
  let start, end;
  
  switch(filterType) {
    case 'day':
      start = document.getElementById('filterDayInput').value;
      end = start;
      break;
    case 'month':
      start = document.getElementById('filterMonthInput').value;
      end = start;
      break;
    case 'period':
      start = document.getElementById('filterStartDate').value;
      end = document.getElementById('filterEndDate').value;
      break;
    default:
      const today = new Date();
      start = `${today.getFullYear()}-${(today.getMonth()+1).toString().padStart(2,'0')}`;
      end = start;
  }
  
  return [start, end];
}

// Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„ÙÙ„ØªØ±Ø© ÙÙŠ Ù‚Ø³Ù… Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©
function updateLeaderFilterDisplay(start, end) {
  const displayElement = document.getElementById('leaderFilterDisplay');
  
  if (!displayElement) {
    const newDisplay = document.createElement('div');
    newDisplay.id = 'leaderFilterDisplay';
    newDisplay.style.margin = '10px 0';
    newDisplay.style.fontWeight = 'bold';
    newDisplay.style.color = '#8e44ad';
    document.getElementById('leaderBonus').prepend(newDisplay);
  }
  
  const displayText = start === end 
    ? `Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©: ${start}`
    : `Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©: Ù…Ù† ${start} Ø¥Ù„Ù‰ ${end}`;
  
  document.getElementById('leaderFilterDisplay').textContent = displayText;
}









// Ø¯Ø§Ù„Ø© Ø§Ø­ØªØ³Ø§Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆØªØ­ÙˆÙŠÙ„Ù‡Ø§ Ø¥Ù„Ù‰ Ø´ÙŠÙƒÙ„
function calculatePoints() {
  // Ø¬Ù„Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø­Ø§Ù„ÙŠ Ù…Ù† Ø§Ù„Ø¹Ù†ØµØ±
  const displayText = document.getElementById('employeeTargetDisplay').textContent;
  // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø±Ù‚Ù… Ù…Ù† Ø§Ù„Ù†Øµ (Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø·)
  const points = parseInt(displayText.replace(/\D/g, ''), 10) || 0;
  // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„Ø´ÙŠÙƒÙ„
  const shekels = (points / 90).toFixed(2);
  // Ø¹Ø±Ø¶ Ø§Ù„Ù†Ø§ØªØ¬ ÙÙŠ Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø©
  alert(`Ù‚ÙŠÙ…Ø© Ø§Ù„Ù†Ù‚Ø§Ø· Ø¨Ø§Ù„Ø´ÙŠÙƒÙ„: â‚ª${shekels}`);
}

// Ø±Ø¨Ø· Ø§Ù„Ø²Ø± Ù…Ø¹ Ø§Ù„Ø¯Ø§Ù„Ø© Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
document.getElementById('calculatePointsBtn').addEventListener('click', calculatePoints);














// --- Ø¨Ø¯Ø§ÙŠØ© ÙƒÙˆØ¯ Ù…ÙƒØ§ÙØ¢Øª Ø§Ù„Ù…ÙˆØ¸Ù ---
const rewardCard   = document.getElementById("rewardCard");
const typeEl       = rewardCard.querySelector(".reward-card__type");
const amountEl     = rewardCard.querySelector(".reward-card__amount");
const dateEl       = rewardCard.querySelector(".reward-card__date");
const prevBtn      = rewardCard.querySelector(".reward-card__nav.prev");
const nextBtn      = rewardCard.querySelector(".reward-card__nav.next");

let rewards = [], currentIndex = 0;
const empUid = localStorage.getItem('employeeName');


function loadRewards() {
  const filterFn = createDateFilter();
  database.ref("rewards")
    .orderByChild("employee").equalTo(empUid)
    .once("value")
    .then(snap => {
      rewards = [];
      snap.forEach(s => {
        const r = s.val();
        // Ù†Ù†Ø´Ø¦ ÙƒØ§Ø¦Ù† ÙŠØ´Ø¨Ù‡ sale Ø­ØªÙ‰ ÙŠØ¹Ù…Ù„ filterFn
        if (filterFn({ date: r.date })) {
          rewards.push(r);
        }
      });
      currentIndex = 0;
      renderReward();
      // ØªØ­Ø¯ÙŠØ« Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø¨Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª
      const sum = rewards.reduce((a,b) => a + Number(b.amount), 0);
      const summaryEl = document.getElementById("salesSummary");
      // Ù†Ø­ØªÙØ¸ Ø¨Ø§Ù„Ù†Øµ Ø§Ù„Ø£ØµÙ„ÙŠ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø®Ù„ <p> Ø«Ù… Ù†Ù„Ø­Ù‚ Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª
      summaryEl.innerHTML = summaryEl.innerHTML.replace(/<\/?p>/g, '')
                              + `<p> | Ù…ÙƒØ§ÙØ¢Øª: â‚ª${sum.toFixed(2)}</p>`;
    })
    .catch(err => console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª:", err));
}


function renderReward() {
  if (!rewards.length) {
    typeEl.textContent = "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙƒØ§ÙØ¢Øª";
    amountEl.textContent = "â‚ª0";
    dateEl.textContent   = "";
    prevBtn.style.display = nextBtn.style.display = "none";
    return;
  }
  const r = rewards[currentIndex];
  typeEl.textContent   = `Ù†ÙˆØ¹: ${r.type}`;
  amountEl.textContent = `â‚ª${r.amount}`;
  dateEl.textContent   = new Date(r.date).toLocaleDateString("ar-IL");
  prevBtn.style.display = currentIndex > 0                   ? "block" : "none";
  nextBtn.style.display = currentIndex < rewards.length - 1  ? "block" : "none";
}

prevBtn.addEventListener("click", () => {
  if (currentIndex > 0) { currentIndex--; renderReward(); }
});
nextBtn.addEventListener("click", () => {
  if (currentIndex < rewards.length - 1) { currentIndex++; renderReward(); }
});

// Ø±Ø¨Ø· ÙÙ„ØªØ± Ø§Ù„Ø´Ù‡Ø±
document.getElementById("filterMonthInput")
        .addEventListener("change", e => loadRewards(e.target.value));
// Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ÙˆÙ„ÙŠ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ÙÙ„ØªØ± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ (Ø´Ù‡Ø±/ÙŠÙˆÙ…/ÙØªØ±Ø©)
loadRewards();

// --- Ù†Ù‡Ø§ÙŠØ© ÙƒÙˆØ¯ Ù…ÙƒØ§ÙØ¢Øª Ø§Ù„Ù…ÙˆØ¸Ù ---










  </script>
</body>
</html>
